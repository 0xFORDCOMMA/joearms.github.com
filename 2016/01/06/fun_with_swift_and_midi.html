<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
      <title>Joe Armstrong - Erlang and other things</title>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <link rel="stylesheet" media="screen" href="/leftFluid.css"/>
      <link rel="stylesheet" media="screen" href="/my.css"/>
    </head>

    <body>
      <div class="wrap">
	<h1>Joe Armstrong - Erlang and other stuff</h1>
	<header>
	  <nav>
	    <ul class="nav inline-items">
	      <li><a href="/index.html">Index</a></li>
	      <li><a href="/lectures.html">Lectures</a></li>
	      <li><a href="/resources.html">Resources</a></li>
	    </ul>
	  </nav>
	</header>
	
	<div class="columnsContainer">
	  
	  <div class="leftColumn">
	    <h1> Fun with Swift and Midi </h1>
	      <p>Seems like I can control core audio directly from the command line in Swift.
no horrid Xcode is involved.
</p>
<blockquote>One quick example seems to be worth a thousand words, so here's a
version of <span class='code'>PlaySoftMidi.cpp</span> converted to Swift.
</blockquote>
<p>*PlaySoftMidi* has
been in the Mac Developer library since 2007 and is just about the
only program I can understand that *uses* the CoreAudio stuff.
</p>
<p>If you have swift2.1 on your machine save <span class='code'>PlaySoftMidi.swift</span> in a file and
give the command:
</p>
<div class='pre'>swift PlaySoftMidi.swift
</div>
<p>And the program will play samples from the inbuilt synthesizer.
</p>
<p>Here are the programs:
</p>
<li><a href='https://developer.apple.com/library/mac/samplecode/PlaySoftMIDI/Listings/main_cpp.html'>PLaySoftMidi.cpp</a> -- Apple origonal program</li>
<li><a href='https://github.com/joearms/joearms.github.com/tree/master/_posts/swift/PlaySoftMidi.swift'>PlaySoftMidi.swift</a> -- The above converted to Swift and modified</li>
<p>These two program also show the equivalence between <span class='code'>C++</span> and <span class='code'>Swift</span>
</p>
<a name='head_1'></a><h1>The Bad</h1>
<p>For example in C++ we say:
</p>
<div class='pre'>enum {
    kMidiMessage_ControlChange      = 0xB,
    kMidiMessage_ProgramChange      = 0xC,
    kMidiMessage_BankMSBControl     = 0,
    kMidiMessage_BankLSBControl     = 32,
    kMidiMessage_NoteOn             = 0x9
};
</div>
<p>And to use a constant just refer to it by name.
</p>
<p>And In Swift we say:
</p>
<div class='pre'>enum Midi : UInt32 {
    case kMidiMessage_ControlChange = 0xB
    case kMidiMessage_ProgramChange = 0xC
    case kMidiMessage_BankMSBControl = 0
    case kMidiMessage_BankLSBControl = 32
    case kMidiMessage_NoteOn = 0x9
    case kMidiMessageProgramChange = 0xC0
}
</div>
<p>And to use a value say something like: <span class='code'>Midi.kMidiMessageProgramChange.rawValue</span>
</p>
<p>I hope this is not a trend - just when you though programming language
couldn't get any more verbose, they did.
</p>
<a name='head_2'></a><h1>The Good</h1>
<p>Type casts seem to be functions. If <span class='code'>x</span> in Swift is an <span class='code'>Int</span> and I
want to convert it to a variable <span class='code'>y</span> of type <span class='code'>UInt32</span> I say:
</p>
<div class='pre'>y = UInt32(x)
</div>
<p>And NOT <span class='code'>y = (UInt32) x</span> -- *horay* say I.
</p>
<a name='head_3'></a><h1>Next Steps</h1>
<p>When I've got a socket interface working I'll connect this to Erlang so that I can
hit the midi interface from Erlang -- then the fun can begin.
</p>

	  </div>
	  
	  <div class="rightColumn">
	    <h1>Index</h1>
 <a href='#head_1'>The Bad</a><br><a href='#head_2'>The Good</a><br><a href='#head_3'>Next Steps</a><br>
	  </div>
	  
	  <footer>

	   
  <!-- the tweet button -->
  <p>	    
    <a href=	"https://twitter.com/share"  class="twitter-share-button" 
       data-url= "http://joearms.github.com/2016/01/06/fun_with_swift_and_midi">Tweet</a>
  </p>
  
  <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
  <!-- end of tweet button -->

  <p>Comments:</p>
  
  <div id="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      // var disqus_developer = 1;
      var disqus_shortname = 'joearmstrongsblog';
      var disqus_identifier = '/2016/01/06/fun_with_swift_and_midi';
      var disqus_url = 'http://joearms.github.com/2016/01/06/fun_with_swift_and_midi.html';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </div>

	   
           <p>&copy; 2014-2016 Joe Armstrong - All Rights Reserved.</p>  </footer>
	</div>
      </div>
    </body>
</html>
